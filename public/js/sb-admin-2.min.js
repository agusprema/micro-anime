(function(b){"function"===typeof define&&define.amd?define(["jquery","datatables.net"],function(a){return b(a,window,document)}):"object"===typeof exports?module.exports=function(a,d){a||(a=window);if(!d||!d.fn.dataTable)d=require("datatables.net")(a,d).$;return b(d,a,a.document)}:b(jQuery,window,document)})(function(b,a,d,m){var f=b.fn.dataTable;b.extend(!0,f.defaults,{dom:"<'row'<'col-sm-12 col-md-6'l><'col-sm-12 col-md-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>",renderer:"bootstrap"});b.extend(f.ext.classes,{sWrapper:"dataTables_wrapper dt-bootstrap4",sFilterInput:"form-control form-control-sm",sLengthSelect:"custom-select custom-select-sm form-control form-control-sm",sProcessing:"dataTables_processing card",sPageButton:"paginate_button page-item"});f.ext.renderer.pageButton.bootstrap=function(a,h,r,s,j,n){var o=new f.Api(a),t=a.oClasses,k=a.oLanguage.oPaginate,u=a.oLanguage.oAria.paginate||{},e,g,p=0,q=function(d,f){var l,h,i,c,m=function(a){a.preventDefault();
!b(a.currentTarget).hasClass("disabled")&&o.page()!=a.data.action&&o.page(a.data.action).draw("page")};l=0;for(h=f.length;l<h;l++)if(c=f[l],b.isArray(c))q(d,c);else{g=e="";switch(c){case "ellipsis":e="&#x2026;";g="disabled";break;case "first":e=k.sFirst;g=c+(0<j?"":" disabled");break;case "previous":e=k.sPrevious;g=c+(0<j?"":" disabled");break;case "next":e=k.sNext;g=c+(j<n-1?"":" disabled");break;case "last":e=k.sLast;g=c+(j<n-1?"":" disabled");break;default:e=c+1,g=j===c?"active":""}e&&(i=b("<li>",{"class":t.sPageButton+" "+g,id:0===r&&"string"===typeof c?a.sTableId+"_"+c:null}).append(b("<a>",{href:"#","aria-controls":a.sTableId,"aria-label":u[c],"data-dt-idx":p,tabindex:a.iTabIndex,"class":"page-link"}).html(e)).appendTo(d),a.oApi._fnBindAction(i,{action:c},m),p++)}},i;try{i=b(h).find(d.activeElement).data("dt-idx")}catch(v){}q(b(h).empty().html('<ul class="pagination"/>').children("ul"),s);i!==m&&b(h).find("[data-dt-idx="+i+"]").focus()};return f});
!function (e) { var t = /(^|&lt;|\s)(www\..+?\..+?)(\s|&gt;|$)/g, a = /(^|&lt;|\s)(((https?|ftp):\/\/|mailto:).+?)(\s|&gt;|$)/g; e.fn.linkify = function (r) { r = e.extend({ className: "linkified", target: "_self", nofollow: !1 }, r); var l = r.nofollow ? ' rel="nofollow"' : ""; return linkifyThis = function () { for (var n = this.childNodes, i = n.length; i--;) { var s = n[i]; if (3 == s.nodeType) { var f = e.trim(s.nodeValue); if (f) { var g = String.format('$1<a href="http://$2" target="{0}" class="{1}"{2}>$2</a>$3', r.target, r.className, l), o = String.format('$1<a href="$2" target="{0}" class="{1}"{2}>$2</a>$5', r.target, r.className, l); f = f.replace(/&/g, "&").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(t, g).replace(a, o), e(s).after(f).remove() } } else 1 != s.nodeType || /^(a|button|textarea)$/i.test(s.tagName) || linkifyThis.call(s) } }, String.format = function (e) { if (arguments.length <= 1) return e; for (var t = arguments.length - 2, a = 0; t >= a; a++) e = e.replace(new RegExp("\\{" + a + "\\}", "gi"), arguments[a + 1]); return e }, this.each(linkifyThis) } }(jQuery);
!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(require("jquery"),require("cropperjs")):"function"==typeof define&&define.amd?define(["jquery","cropperjs"],r):r(e.jQuery,e.Cropper)}(this,function(e,r){"use strict";if(e=e&&e.hasOwnProperty("default")?e.default:e,r=r&&r.hasOwnProperty("default")?r.default:r,e.fn){var t=e.fn.cropper;e.fn.cropper=function(t){for(var n=arguments.length,o=Array(n>1?n-1:0),f=1;f<n;f++)o[f-1]=arguments[f];var p=void 0;return this.each(function(n,f){var i=e(f),a="destroy"===t,u=i.data("cropper");if(!u){if(a)return;var c=e.extend({},i.data(),e.isPlainObject(t)&&t);u=new r(f,c),i.data("cropper",u)}if("string"==typeof t){var s=u[t];e.isFunction(s)&&((p=s.apply(u,o))===u&&(p=void 0),a&&i.removeData("cropper"))}}),void 0!==p?p:this},e.fn.cropper.Constructor=r,e.fn.cropper.setDefaults=r.setDefaults,e.fn.cropper.noConflict=function(){return e.fn.cropper=t,this}}});
!function(t){"use strict";t("#sidebarToggle, #sidebarToggleTop").on("click",function(o){t("body").toggleClass("sidebar-toggled"),t(".sidebar").toggleClass("toggled"),t(".sidebar").hasClass("toggled")&&t(".sidebar .collapse").collapse("hide")}),t(window).resize(function(){t(window).width()<768&&t(".sidebar .collapse").collapse("hide")}),t("body.fixed-nav .sidebar").on("mousewheel DOMMouseScroll wheel",function(o){if(768<t(window).width()){var e=o.originalEvent,l=e.wheelDelta||-e.detail;this.scrollTop+=30*(l<0?1:-1),o.preventDefault()}}),t(document).on("scroll",function(){100<t(this).scrollTop()?t(".scroll-to-top").fadeIn():t(".scroll-to-top").fadeOut()}),t(document).on("click","a.scroll-to-top",function(o){var e=t(this);t("html, body").stop().animate({scrollTop:t(e.attr("href")).offset().top},1e3,"easeInOutExpo"),o.preventDefault()})}(jQuery);
$(document).ready(function(){
    var base_url = $('meta[name="url"]').attr("content")+'/';
	$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});
    $("#table1").DataTable(),$("#tablecuss1").DataTable({order:[],columnDefs:[{orderable:!1,targets:[7]}]}),$(".tmbl-delete").on("click",function(t){t.preventDefault();const e=$(this).val();Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.value&&($('#tmbl-delete-'+e).submit())})}),$(".tmbl-update").on("click",function(t){t.preventDefault();const e=$(this).attr("href");Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, update it!"}).then(t=>{t.value&&(document.location.href=e)})}),$(".custom-file-input").on("change",function(){let t=$(this).val().split("\\").pop();$(this).next(".custom-file-label").addClass("selected").html(t)}),$(".alert").linkify();var t=function(){1==$("#check-all:checked").length?$(".check").attr("checked"," "):$(".check").removeAttr("checked")};t(),$("#check-all").on("click",t)
    $(".rolee").on("click",function(){$(this).data("token");const e=$(this).data("menu"),a=$(this).data("role");$.ajax({url:base_url+"moderator/changeaccess",type:"post",data:{menuId:e,roleId:a},success:function(){document.location.href=base_url+"/moderator/roleaccess/"+a}})});
    function sweat_success_list(){Swal.fire({position:"center",type:"success",title:"Your list has been saved",showConfirmButton:!1,timer:1500})}function sweat_error_list(){Swal.fire({position:"center",type:"error",title:"Oops...",text:"Something went wrong!",showConfirmButton:!1,timer:1500})};

    var countChecked = function() {
        1 == $("#customSwitch1:checked").length ? ($(".btn-close").removeClass("d-none"), $(".box-post").addClass("mbs-10"), $(".baba").addClass("mbs-40")) : ($(".btn-close").addClass("d-none"), $(".box-post").removeClass("mbs-10"), $(".baba").removeClass("mbs-40"))
    };
    countChecked(), $("#customSwitch1").on("click", countChecked), $(document).on("click", ".btn-close", function(e) {
        e.preventDefault();
        var t = $(this).data("anim");
        $(this), Swal.fire({
            title: "Are you sure?",
            text: "You won't be able to revert this!",
            type: "warning",
            showCancelButton: !0,
            confirmButtonColor: "#3085d6",
            cancelButtonColor: "#d33",
            confirmButtonText: "Yes, delete it!"
        }).then(e => {
            e.value && ($.getJSON(base_url + "api/check_login/", function(e) {
                "true" == e.login ? $.ajax({
                    url: base_url + "api/remove-list/" + t,
                    type: "GET",
                    success: function(e) {
                        "false" == e.error ? ($("." + t).addClass("d-none"), sweat_success_list()) : sweat_error_list()
                    }
                }) : window.location.href = base_url
            }), Swal.fire("Deleted!", "Your file has been deleted.", "success"))
        })
    });

    var num=$("#count").text();num>=1e3&&num<=999999?(num/=1e3,num2=num.toFixed(2),$("#count").text(num2+"K")):num>=1e6&&num<=999999999?(num/=1e6,num2=num.toFixed(1),$("#count").text(num2+"M")):num>=1e9&&num<=999999999999?(num/=1e9,num2=num.toFixed(1),$("#count").text(num2+"B")):$("#count").text(num);
    $('#tolltip').tooltip({ boundary: 'window' });function sweat_error_list(){Swal.fire({position:"center",type:"error",title:"Oops...",text:"Something went wrong!",showConfirmButton:!1,timer:1500})}

    var em = $('#error-modal').data('error');
    if(em == true){$('#newMenuModal, #newSubMenuModal').modal('show');}

    var panjang = window.innerWidth|| document.documentElement.clientWidth|| document.body.clientWidth;
    console.log(panjang);
    if(panjang > 1024){$('#lock, #cancel-thumb, #accept-thumb, #edit-thumb, #unlock').tooltip({ boundary: 'window' });}
    $.getJSON(''+ base_url +'api/check_login/', function (data) {if(data.login == 'true') {} else {window.location.href = base_url;}});

    $('#image').change(function(){
        var img = new Image();
        img.src = URL.createObjectURL(this.files[0]);
        $('#image-user, #lock').removeClass('d-none');
        $('#image-user').attr("src", ""+ URL.createObjectURL(this.files[0]) +"");
        img.onload = () => {
            $('#image-user').cropper({
                dragMode: 'move',
                aspectRatio: 1/1,
                width: 500,
                height: 500,
                fillColor: '#fff',
                imageSmoothingEnabled: false,
                imageSmoothingQuality: 'high',
                viewMode: 2,
                center: false,
                toggleDragModeOnDblclick: false,
                crop: function (e) {
                    $('#image-x').val(Math.round(e.detail.x));
                    $('#image-y').val(Math.round(e.detail.y));
                    $('#image-height').val(Math.round(e.detail.height));
                    $('#image-width').val(Math.round(e.detail.width));
                }
            }).cropper('reset', true).cropper('replace', URL.createObjectURL(this.files[0]));
        };
    });

    $('#lock').on('click', function(){
        $('#lock').addClass('d-none');
        $('#unlock').removeClass('d-none');
        $('#image-user, #thumb-user-view').cropper("disable");
    });
    $('#unlock').on('click', function(){
        $('#lock').removeClass('d-none');
        $('#unlock').addClass('d-none');
        $('#image-user, #thumb-user-view').cropper("enable");
    });

    $('#image_thumb').change(function(){
        var img = new Image();
        img.src = URL.createObjectURL(this.files[0]);
        $('#newMenuModal').modal('toggle');
        $('#thumb-user, #edit-thumb').addClass('d-none');
        $('#accept-thumb, #cancel-thumb, #lock').removeClass('d-none');
        $('#thumb-user-view').attr("src", ""+ URL.createObjectURL(this.files[0]) +"");
        img.onload = () => {
            $('#thumb-user-view').cropper({
                dragMode: 'move',
                aspectRatio: 27/9,
                width: 500,
                height: 500,
                fillColor: '#fff',
                imageSmoothingEnabled: false,
                imageSmoothingQuality: 'high',
                viewMode: 3,
                center: false,
                toggleDragModeOnDblclick: false,
                crop: function (e) {
                    $('#image-x').val(Math.round(e.detail.x));
                    $('#image-y').val(Math.round(e.detail.y));
                    $('#image-height').val(Math.round(e.detail.height));
                    $('#image-width').val(Math.round(e.detail.width));
                }
            }).cropper('reset', true).cropper('replace', URL.createObjectURL(this.files[0]));
        };
    });

    $('#accept-thumb').on('click', function(){
        Swal.fire({
            title: 'Are you sure?',
            text: "Are you sure to crop this image!",
            type: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes, crop it!'
        }).then((result) => {
            if (result.value) {
                $("#form_thumb").submit();
            }
        })
    });
    const flash_logout = $(".flash-data").data('flash');
    if(flash_logout == 'image'){
        Swal.fire({
            position: 'center',
            type: 'success',
            title: 'Your Image has been changed!',
            showConfirmButton: false,
            timer: 1500
        })
    }
    if(flash_logout == 'image_error'){
        sweat_error_list();
    }

    $('#cancel-thumb').on('click', function(){
        $('#accept-thumb, #lock, #cancel-thumb').addClass('d-none');
        $('#thumb-user, #edit-thumb').removeClass('d-none');
        $('#thumb-user-view').cropper("destroy");
        $('#image-x, #image-y, #image-height, #image-width, #image_thumb').val('');
        $('.custom-file-label').html("Choose file");
    });

    $('select[name="birthdayyear"], select[name="birthdayday"], select[name="birthdaymonth"]').change(function(){
        var month = $('select[name="birthdaymonth"]').val();
        var day = $('select[name="birthdayday"]').val();
        var year = $('select[name="birthdayyear"]').val();

        if(month != 0 && day != 0 && year != 0) {
            $('#birthday').val(year+'-'+month+'-'+day);
        } else {
            $('#birthday').val('');
        }

        var VAL = $('#birthday').val();

        var date = new RegExp('/[0-9-]/');

        if (date.test(VAL)) {
            $('#birthday').val('');
        }
    });

    $(document).on('click', '#friends.btn-add-friends', function(e) {
        e.preventDefault();

        var idFriends = $(this).data("friends");
        var thisCLick = $(this);
        $.getJSON(''+ base_url +'api/check_login/', function (data) {
            if(data.login == 'true') {
                $.ajax({
                    url: base_url +'api/friends/'+ idFriends +'/add',
                    type: "GET",
                    success: function (result) {
                        if(result == 'success') {
                            thisCLick.removeClass('btn-add-friends btn-success');
                            thisCLick.addClass('btn-cancel-friends btn-warning');
                            thisCLick.html('<i class="fas fa-user-times"></i> Cancel');
                            sweat_success_list();
                        } else {
                            sweat_error_list();
                        }
                    }
                });
            } else {
                window.location.href = base_url;
            }
        });
    });

    $(document).on('click', '#friends.btn-cancel-friends, #action-user.btn-cancel-friends', function(e) {
        e.preventDefault();

        var idFriends = $(this).data("friends");
        var thisCLick = $(this);
        $.getJSON(''+ base_url +'api/check_login/', function (data) {
            if(data.login == 'true') {
                $.ajax({
                    url: base_url +'api/friends/'+ idFriends +'/cancel',
                    type: "GET",
                    success: function (result) {
                        if(result == 'success') {
                            $('*[data-click-user-action="'+idFriends+'"]').html('<div id="friends" data-friends="'+idFriends+'" class="btn friends btn-add-friends btn-success"><i class="fas fa-user-plus"></i> Add</div>');
                            $('*[data-friendsQ="'+idFriends+'"]').empty();
                            var count_user_req = $('#count_user_req').html();
                            var count_ur = count_user_req - 1;
                            if(count_ur < 1){
                                var hs_count_ur = '';
                            } else {
                                var hs_count_ur = count_ur;
                            }
                            $('#count_user_req').html(hs_count_ur);
                            sweat_success_list();
                        } else {
                            sweat_error_list();
                        }
                    }
                });
            } else {
                window.location.href = base_url;
            }
        });
    });

    $(document).on('click', '#friends.btn-remove-friends', function(e) {
        e.preventDefault();

        var idFriends = $(this).data("friends");
        var thisCLick = $(this);
        $.getJSON(''+ base_url +'api/check_login/', function (data) {
            if(data.login == 'true') {
                $.ajax({
                    url: base_url +'api/friends/'+ idFriends +'/remove',
                    type: "GET",
                    success: function (result) {
                        if(result == 'success') {
                            thisCLick.addClass('btn-add-friends btn-success');
                            thisCLick.removeClass('btn-remove-friends btn-danger');
                            thisCLick.html('<i class="fas fa-user-plus"></i> Add');
                            sweat_success_list();
                        } else {
                            sweat_error_list();
                        }
                    }
                });
            } else {
                window.location.href = base_url;
            }
        });
    });


    $(document).on('click', '#friends.btn-accept-friends, #action-user.btn-accept-friends', function(e) {
        e.preventDefault();

        var idFriends = $(this).data("friends");
        var thisCLick = $(this);
        $.getJSON(''+ base_url +'api/check_login/', function (data) {
            if(data.login == 'true') {
                $.ajax({
                    url: base_url +'api/friends/'+ idFriends +'/accept',
                    type: "GET",
                    success: function (result) {
                        if(result == 'success') {
                            $('*[data-click-user-action="'+idFriends+'"]').html('<div id="friends" data-friends="'+idFriends+'" class="btn friends btn-remove-friends btn-danger"><i class="fas fa-user-minus"></i> Remove</div>');
                            $('*[data-friendsQ="'+idFriends+'"]').empty();
                            var count_user_req = $('#count_user_req').html();
                            var count_ur = count_user_req - 1;
                            if(count_ur < 1){
                                var hs_count_ur = '';
                            } else {
                                var hs_count_ur = count_ur;
                            }
                            $('#count_user_req').html(hs_count_ur);
                            sweat_success_list();
                        } else {
                            sweat_error_list();
                        }
                    }
                });
            } else {
                window.location.href = base_url;
            }
        });
    });

    $(".btn-search-m").click(function(){
        $(".input-search-m").toggleClass("active").focus;
        $(this).toggleClass("animate");
        if($(".input-search-m").val()){
            $(".s-m-friends-from").submit();
        } else {
            $(".input-search-m").val("");
        }
        $(".wk").toggleClass("animate2");
    });
    $(document).on('click.bs.dropdown.data-api', '.dropdown.keep-inside-clicks-open', function (e) {
        e.stopPropagation();
    });

});
